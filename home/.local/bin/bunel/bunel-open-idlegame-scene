#!/usr/bin/env bash

cd "$COSDIR" || exit
project=

# bunel-select-in-scene

if [ "$1" == "--active-window" ]
then
    project=$(xdotool getactivewindow getwindowname | rg '.* - (IdleGame.*) - .*' -r '$1')
else
    bunel-select-in-scene
    exit 0
    projects=$(fd -td -I Assets -d2 | cut -d'/' -f1 | rg IdleGame)
    project=$(echo "$projects" | dmenu -b -p "Project to open scene:")
fi

scene=$(fd -tf -I -e unity . IdleGame/Assets/Scenes/ -E Pets/ -E Heroes/ | dmenu -b -p "scene:" -l 10 -i | cut -d'/' -f2-)
[ -n "$project" ] && [ -n "$scene" ] && bunel "$project" open-scene "$scene"
